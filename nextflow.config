// QTL2_NF Configuration File
// Default parameters
params {
    // Input files
    phenotype_file = null
    genotype_files = null
    muga_dir = null
    mouse_genes_db = null
    prefix = null
    
    // Processing options
    auto_prefix_samples = false
    
    // Output directory
    outdir = './results'
    
    // Process parameters
    help = false
}

// Docker configuration
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
    temp = 'auto'
}

// Process configuration
process {
    // Default resources
    cpus = 1
    memory = '4 GB'
    time = '2h'
    
    // Module-specific containers and resources
    withName: 'PHENOTYPE_PROCESS' {
        container = 'qtl2-phenotype:latest'
        memory = '8 GB'
        time = '1h'
    }
}

// Execution profiles
profiles {
    // Local execution with Docker (default)
    standard {
        executor = 'local'
        docker.enabled = true
    }
    
    // Local execution without Docker (for testing)
    local {
        executor = 'local'
        docker.enabled = false
        process.container = null
    }
    
    // SLURM cluster configuration with Docker
    slurm {
        executor = 'slurm'
        docker.enabled = true
        process {
            queue = 'medium'
            clusterOptions = '--account=yourproject'
        }
    }
    
    // UC Davis FARM cluster with Docker
    farm {
        executor = 'slurm'
        docker.enabled = true
        process {
            queue = 'med'
            clusterOptions = '--partition=med'
        }
    }
    
    // USDA Ceres cluster with Docker
    ceres {
        executor = 'slurm'
        docker.enabled = true
        process {
            queue = 'short'
            clusterOptions = '--partition=short'
        }
    }
    
    // Singularity profile (for HPC that doesn't allow Docker)
    singularity {
        singularity.enabled = true
        docker.enabled = false
        process.container = 'docker://qtl2-phenotype:latest'
    }
}

// Resource limits
executor {
    queueSize = 50
    submitRateLimit = '10 sec'
}

// Enable execution reports
timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
}
report {
    enabled = true
    file = "${params.outdir}/report.html"
}
trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
}
